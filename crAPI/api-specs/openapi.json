{
  "openapi": "3.0.1",
  "info": {
    "title": "OWASP crAPI API",
    "version": "1.0"
  },
  "externalDocs": {
    "description": "Completely Ridiculous API - Highly Vulnerable Demo App",
    "url": "https://github.com/levoai/demo-apps/tree/main/crAPI"
  },
  "paths": {
    "/": {
      "get": {
        "operationId": "OP_GET_HOME",
        "summary": "App homepage",
        "tags": [
          "Home"
        ],
        "security": [],
        "responses": {
          "200": {
            "content": {
              "text/html": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": ""
          }
        }
      },
      "parameters": []
    },

    "/identity/api/auth/signup": {
      "post": {
        "operationId": "OP_IDENT_AUTH_SIGNUP",
        "summary": "Sign up and create an account",
        "tags": [
          "Identity / Auth"
        ],
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "name",
                  "number",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "number": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message",
                    "status"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "status": {
                      "type": "number"
                    }
                  }
                }
              }
            },
            "description": ""
          }
        }
      },
      "parameters": []
    },
    "/identity/api/auth/login": {
      "post": {
        "operationId": "OP_IDENT_AUTH_LOGIN",
        "summary": "Login",
        "tags": [
          "Identity / Auth"
        ],
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message",
                    "token",
                    "type"
                  ],
                  "properties": {
                    "message": {},
                    "token": {
                      "type": "string"
                    },
                    "type": {
                      "type": "string"
                    }
                  }
                }
              }
            },
            "description": ""
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "details",
                    "message"
                  ],
                  "properties": {
                    "details": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            },
            "description": ""
          },
          "500": {
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": ""
          }
        }
      },
      "parameters": []
    },
    "/identity/api/auth/v3/check-otp": {
      "post": {
        "operationId": "OP_IDENT_AUTH_CHECK_OTP",
        "summary": "Validate One-Time-Password sent when using `forgot password`",
        "tags": [
          "Identity / Auth"
        ],
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "otp",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string"
                  },
                  "otp": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message",
                    "status"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "status": {
                      "type": "number"
                    }
                  }
                }
              }
            },
            "description": ""
          }
        }
      },
      "parameters": []
    },
    "/identity/api/auth/forget-password": {
      "post": {
        "operationId": "OP_IDENT_AUTH_FORGOT_PASSWORD",
        "summary": "Start forgot password flow by sending a OTP by email",
        "tags": [
          "Identity / Auth"
        ],
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email"
                ],
                "properties": {
                  "email": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message",
                    "status"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "status": {
                      "type": "number"
                    }
                  }
                }
              }
            },
            "description": ""
          }
        }
      },
      "parameters": []
    },
    "/identity/api/auth/v4.0/user/login-with-token": {
      "post": {
        "operationId": "OP_IDENT_AUTH_TOKEN_LOGIN",
        "summary": "Login with token.",
        "tags": [
          "Identity / Auth"
        ],
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginWithEmailToken"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/CRAPIResponse"
                }
              }
            }
          }
        }
      }
    },
    "/identity/api/auth/v2.7/user/login-with-token": {
      "post": {
        "operationId": "OP_IDENT_AUTH_TOKEN_LOGINv27",
        "summary": "Login with token - v2.7.",
        "tags": [
          "Identity / Auth"
        ],
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginWithEmailToken"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/JwtResponse"
                }
              }
            }
          }
        }
      }
    },
    "/identity/api/auth/v2/check-otp": {
      "post": {
        "operationId": "OP_IDENT_AUTH_CHECK_OTPV2",
        "summary": "Validate One-Time-Password sent when using `forgot password` - Version 2",
        "tags": [
          "Identity / Auth"
        ],
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OtpForm"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/CRAPIResponse"
                }
              }
            }
          }
        }
      }
    },

    "/identity/api/v2/user/reset-password": {
      "post": {
        "operationId": "OP_IDENT_USR_RESET_PASSWORD",
        "summary": "Reset password",
        "tags": [
          "Identity / User"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "password": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message",
                    "status"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "status": {
                      "type": "number"
                    }
                  }
                }
              }
            },
            "description": ""
          },
          "500": {
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "description": ""
          }
        }
      },
      "parameters": []
    },
    "/identity/api/v2/user/change-email": {
      "post": {
        "operationId": "OP_IDENT_USR_CHANGE_EMAIL",
        "summary": "Change user email",
        "tags": [
          "Identity / User"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "new_email",
                  "old_email"
                ],
                "properties": {
                  "new_email": {
                    "type": "string"
                  },
                  "old_email": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message",
                    "status"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "status": {
                      "type": "number"
                    }
                  }
                }
              }
            },
            "description": ""
          }
        }
      },
      "parameters": []
    },
    "/identity/api/v2/user/verify-email-token": {
      "post": {
        "operationId": "OP_IDENT_USR_VERIFY_CHANGE_EMAIL_TOKEN",
        "summary": "Verify token sent for changing email",
        "tags": [
          "Identity / User"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "new_email",
                  "token"
                ],
                "properties": {
                  "new_email": {
                    "type": "string"
                  },
                  "token": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message",
                    "status"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "status": {
                      "type": "number"
                    }
                  }
                }
              }
            },
            "description": ""
          }
        }
      },
      "parameters": []
    },
    "/identity/api/v2/user/dashboard": {
      "get": {
        "operationId": "OP_IDENT_USR_GET_DASHBOARD",
        "summary": "Get user dashboard data",
        "tags": [
          "Identity / User"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "available_credit",
                    "email",
                    "id",
                    "name",
                    "number",
                    "picture_url",
                    "role",
                    "video_id",
                    "video_name",
                    "video_url"
                  ],
                  "properties": {
                    "number": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    },
                    "video_id": {
                      "type": "number"
                    },
                    "video_url": {},
                    "email": {
                      "type": "string"
                    },
                    "role": {
                      "type": "string"
                    },
                    "available_credit": {
                      "type": "number"
                    },
                    "video_name": {},
                    "id": {
                      "type": "number"
                    },
                    "picture_url": {}
                  }
                }
              }
            },
            "description": ""
          }
        }
      },
      "parameters": []
    },
    "/identity/api/v2/user/pictures": {
      "post": {
        "operationId": "OP_IDENT_USR_UPDATE_PROFILE_PIC",
        "summary": "Update user profile picture",
        "tags": [
          "Identity / User"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "string"
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "available_credit",
                    "id",
                    "name",
                    "picture",
                    "status",
                    "user"
                  ],
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "available_credit": {
                      "type": "number"
                    },
                    "id": {
                      "type": "number"
                    },
                    "status": {
                      "type": "string"
                    },
                    "picture": {
                      "type": "string"
                    },
                    "user": {}
                  }
                }
              }
            },
            "description": ""
          }
        }
      },
      "parameters": []
    },
    "/identity/api/v2/user/videos": {
      "post": {
        "summary": "Add a video to this user's profile.",
        "operationId": "OP_IDENT_USR_ADD_PROFILE_VIDEO",
        "tags": [
          "Identity / User"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "required": [
                  "file"
                ],
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/identity/api/v2/user/videos/{video_id}": {
      "get": {
        "summary": "Get the video associated with the user's profile.",
        "operationId": "OP_IDENT_USR_GET_PROFILE_VIDEO",
        "tags": [
          "Identity / User"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "video_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update the video identified by video_id in this user's profile.",
        "operationId": "OP_IDENT_USR_MOD_PROFILE_VIDEO",
        "tags": [
          "Identity / User"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "video_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VideoForm"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete the video identified by video_id from this user's profile.",
        "operationId": "OP_IDENT_USR_DEL_PROFILE_VIDEO",
        "tags": [
          "Identity / User"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "video_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/identity/api/v2/user/videos/convert_video": {
      "get": {
        "summary": "Convert the format for the specified video.",
        "operationId": "OP_IDENT_USR_CONVERT_PROFILE_VIDEO",
        "tags": [
          "Identity / User"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "video_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },

    "/identity/api/v2/admin/videos/{video_id}": {
      "delete": {
        "summary": "As admin, delete the video identified by video_id.",
        "operationId": "OP_IDENT_ADMIN_DEL_PROFILE_VIDEO",
        "tags": [
          "Identity / Admin"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "video_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/CRAPIResponse"
                }
              }
            }
          }
        }
      }
    },

    "/identity/api/v2/vehicle/vehicles": {
      "get": {
        "operationId": "OP_IDENT_VEHICLE_GET_VEHICLES",
        "summary": "Get user vehicles",
        "tags": [
          "Identity / Vehicle"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "required": [
                      "id",
                      "model",
                      "owner",
                      "pincode",
                      "status",
                      "uuid",
                      "vehicleLocation",
                      "vin",
                      "year"
                    ],
                    "properties": {
                      "model": {
                        "type": "object",
                        "required": [
                          "fuel_type",
                          "id",
                          "model",
                          "vehicle_img",
                          "vehiclecompany"
                        ],
                        "properties": {
                          "model": {
                            "type": "string"
                          },
                          "fuel_type": {
                            "type": "string"
                          },
                          "vehicle_img": {
                            "type": "string"
                          },
                          "id": {
                            "type": "number"
                          },
                          "vehiclecompany": {
                            "type": "object",
                            "required": [
                              "id",
                              "name"
                            ],
                            "properties": {
                              "id": {
                                "type": "number"
                              },
                              "name": {
                                "type": "string"
                              }
                            }
                          }
                        }
                      },
                      "uuid": {
                        "type": "string"
                      },
                      "vehicleLocation": {
                        "type": "object",
                        "required": [
                          "id",
                          "latitude",
                          "longitude"
                        ],
                        "properties": {
                          "id": {
                            "type": "number"
                          },
                          "latitude": {
                            "type": "string"
                          },
                          "longitude": {
                            "type": "string"
                          }
                        }
                      },
                      "year": {
                        "type": "number"
                      },
                      "id": {
                        "type": "number"
                      },
                      "status": {
                        "type": "string"
                      },
                      "vin": {
                        "type": "string"
                      },
                      "owner": {},
                      "pincode": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            },
            "description": ""
          }
        }
      },
      "parameters": []
    },
    "/identity/api/v2/vehicle/add_vehicle": {
      "post": {
        "operationId": "OP_IDENT_VEHICLE_ADD_VEHICLE",
        "summary": "Add the user vehicle",
        "tags": [
          "Identity / Vehicle"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "pincode",
                  "vin"
                ],
                "properties": {
                  "pincode": {
                    "type": "string"
                  },
                  "vin": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message",
                    "status"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "status": {
                      "type": "number"
                    }
                  }
                }
              }
            },
            "description": ""
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message",
                    "status"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "status": {
                      "type": "number"
                    }
                  }
                }
              }
            },
            "description": ""
          }
        }
      },
      "parameters": []
    },
    "/identity/api/v2/vehicle/{vehicleId}/location": {
      "get": {
        "operationId": "OP_IDENT_VEHICLE_GET_LOCATION",
        "summary": "Get user's vehicle location",
        "tags": [
          "Identity / Vehicle"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "carId",
                    "fullName",
                    "vehicleLocation"
                  ],
                  "properties": {
                    "carId": {
                      "type": "string"
                    },
                    "fullName": {
                      "type": "string"
                    },
                    "vehicleLocation": {
                      "type": "object",
                      "required": [
                        "id",
                        "latitude",
                        "longitude"
                      ],
                      "properties": {
                        "id": {
                          "type": "number"
                        },
                        "latitude": {
                          "type": "string"
                        },
                        "longitude": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            },
            "description": ""
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message",
                    "status"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "status": {
                      "type": "number"
                    }
                  }
                }
              }
            },
            "description": ""
          }
        }
      },
      "parameters": [
        {
          "in": "path",
          "name": "vehicleId",
          "required": true,
          "schema": {
            "type": "string",
            "format": "uuid"
          }
        }
      ]
    },
    "/identity/api/v2/vehicle/resend_email": {
      "post": {
        "operationId": "OP_IDENT_VEHICLE_RESEND_EMAIL",
        "summary": "Resend vehicles details to be added to the user dashboard",
        "tags": [
          "Identity / Vehicle"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message",
                    "status"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "status": {
                      "type": "number"
                    }
                  }
                }
              }
            },
            "description": ""
          }
        }
      },
      "parameters": []
    },
    
    "/identity/privacy/user_agent": {
      "get": {
        "tags": [
          "Identity / Privacy"
        ],
        "operationId": "OP_IDENT_PRIVACY_USERAGENT",
        "summary": "Get the value of the user agent request header. This data is logged. crAPI is committed to your privacy and being transparent about all your data that is processed.",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message",
                    "status"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "status": {
                      "type": "number"
                    }
                  }
                }
              }
            },
            "description": ""
          }
        },
        "security": []
      },
      "parameters": [
        {
          "name": "User-Agent",
          "in": "header",
          "description": "Information used to identify your browser.",
          "required": true,
          "schema": {
            "type": "string",
            "example": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.103 Safari/537.36"
          }
        }
      ]
    },
    "/identity/privacy/user/find": {
      "get": {
        "tags": [
          "Identity / Privacy"
        ],
        "operationId": "OP_IDENT_PRIVACY_USER_FIND",
        "summary": "Get details of a User given their phone number.",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "number",
                    "password",
                    "role",
                    "created_on",
                    "id",
                    "email"
                  ],
                  "properties": {
                    "number": {
                      "type": "string"
                    },
                    "password": {
                      "type": "string"
                    },
                    "role": {
                      "type": "integer"
                    },
                    "created_on": {
                      "type": "string",
                      "format": "date"
                    },
                    "id": {
                      "type": "integer"
                    },
                    "email": {
                      "type": "string",
                      "format": "email"
                    }
                  }
                }
              }
            },
            "description": "User details corresponding to the phone number."
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message",
                    "status"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "status": {
                      "type": "number"
                    }
                  }
                }
              }
            },
            "description": "User not found."
          }
        },
        "security": []
      },
      "parameters": [
        {
          "name": "number",
          "in": "query",
          "description": "Phone number of the user to locate.",
          "required": true,
          "schema": {
            "type": "string",
            "example": "4156895423"
          }
        }
      ]
    },

    "/community/api/v2/community/posts/{postId}": {
      "get": {
        "operationId": "OP_COMMUNITY_GET_POST",
        "summary": "Get an specific post in the forum",
        "tags": [
          "Community / Posts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": ""
          }
        }
      },
      "parameters": [
        {
          "in": "path",
          "name": "postId",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ]
    },
    "/community/api/v2/community/posts": {
      "post": {
        "operationId": "OP_COMMUNITY_CREATE_POST",
        "summary": "Create a new post in the forum",
        "tags": [
          "Community / Posts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "content": {
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "CreatedAt",
                    "author",
                    "authorid",
                    "comments",
                    "content",
                    "id",
                    "title"
                  ],
                  "properties": {
                    "author": {
                      "type": "object",
                      "required": [
                        "created_at",
                        "email",
                        "nickname",
                        "profile_pic_url",
                        "vehicleid"
                      ],
                      "properties": {
                        "vehicleid": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "email": {
                          "type": "string"
                        },
                        "created_at": {
                          "type": "string"
                        },
                        "profile_pic_url": {
                          "type": "string"
                        },
                        "nickname": {
                          "type": "string"
                        }
                      }
                    },
                    "id": {
                      "type": "string"
                    },
                    "authorid": {
                      "type": "number"
                    },
                    "content": {
                      "type": "string"
                    },
                    "CreatedAt": {
                      "type": "string"
                    },
                    "title": {
                      "type": "string"
                    },
                    "comments": {
                      "type": "array",
                      "items": {}
                    }
                  }
                }
              }
            },
            "description": ""
          }
        }
      },
      "parameters": []
    },
    "/community/api/v2/community/posts/{postId}/comment": {
      "post": {
        "operationId": "OP_COMMUNITY_POST_ADD_COMMENT",
        "summary": "Add a comment to an existing post in the forum",
        "tags": [
          "Community / Posts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "content": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "CreatedAt",
                    "author",
                    "authorid",
                    "comments",
                    "content",
                    "id",
                    "title"
                  ],
                  "properties": {
                    "author": {
                      "type": "object",
                      "required": [
                        "created_at",
                        "email",
                        "nickname",
                        "profile_pic_url",
                        "vehicleid"
                      ],
                      "properties": {
                        "vehicleid": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "email": {
                          "type": "string"
                        },
                        "created_at": {
                          "type": "string"
                        },
                        "profile_pic_url": {
                          "type": "string"
                        },
                        "nickname": {
                          "type": "string"
                        }
                      }
                    },
                    "id": {
                      "type": "string"
                    },
                    "authorid": {
                      "type": "number"
                    },
                    "content": {
                      "type": "string"
                    },
                    "CreatedAt": {
                      "type": "string"
                    },
                    "title": {
                      "type": "string"
                    },
                    "comments": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "required": [
                          "CreatedAt",
                          "author",
                          "content",
                          "id"
                        ],
                        "properties": {
                          "CreatedAt": {
                            "type": "string"
                          },
                          "author": {
                            "type": "object",
                            "required": [
                              "created_at",
                              "email",
                              "nickname",
                              "profile_pic_url",
                              "vehicleid"
                            ],
                            "properties": {
                              "vehicleid": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "email": {
                                "type": "string"
                              },
                              "created_at": {
                                "type": "string"
                              },
                              "profile_pic_url": {
                                "type": "string"
                              },
                              "nickname": {
                                "type": "string"
                              }
                            }
                          },
                          "content": {
                            "type": "string"
                          },
                          "id": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "description": ""
          }
        }
      },
      "parameters": [
        {
          "in": "path",
          "name": "postId",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ]
    },
    "/community/api/v2/community/posts/recent": {
      "get": {
        "summary": "Fetch the most recent posts in the forum.",
        "operationId": "OP_COMMUNITY_GET_RECENT_POSTS",
        "tags": [
          "Community / Posts"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "headers": {
              "Transfer-Encoding": {
                "content": {
                  "text/plain": {
                    "schema": {
                      "type": "string",
                      "example": "chunked"
                    },
                    "example": "chunked"
                  }
                }
              },
              "Access-Control-Allow-Headers": {
                "content": {
                  "text/plain": {
                    "schema": {
                      "type": "string",
                      "example": "Accept, Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization"
                    },
                    "example": "Accept, Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization"
                  }
                }
              },
              "Access-Control-Allow-Methods": {
                "content": {
                  "text/plain": {
                    "schema": {
                      "type": "string",
                      "example": "POST, GET, OPTIONS, PUT, DELETE"
                    },
                    "example": "POST, GET, OPTIONS, PUT, DELETE"
                  }
                }
              },
              "Access-Control-Allow-Origin": {
                "content": {
                  "text/plain": {
                    "schema": {
                      "type": "string",
                      "example": "*"
                    },
                    "example": "*"
                  }
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Post"
                  },
                  "description": "Array of forum posts"
                },
                "example": [
                  {
                    "id": "ConZLXacq3MqhbLQDrbNLf",
                    "title": "Title 3",
                    "content": "Hello world 3",
                    "author": {
                      "nickname": "Hacker",
                      "email": "hacker@darkweb.com",
                      "vehicleid": "abac4018-5a38-466c-ab7f-361908afeab6",
                      "profile_pic_url": "",
                      "created_at": "2021-09-16T01:46:32.432Z"
                    },
                    "comments": [],
                    "authorid": 3,
                    "CreatedAt": "2021-09-16T01:46:32.432Z"
                  },
                  {
                    "id": "rj2md2VVDBjYUGNG6LmQ9e",
                    "title": "Title 2",
                    "content": "Hello world 2",
                    "author": {
                      "nickname": "Victim Two",
                      "email": "victim.two@example.com",
                      "vehicleid": "8b9edbde-d74d-4773-8c9f-adb65c6056fc",
                      "profile_pic_url": "",
                      "created_at": "2021-09-16T01:46:32.429Z"
                    },
                    "comments": [],
                    "authorid": 2,
                    "CreatedAt": "2021-09-16T01:46:32.429Z"
                  },
                  {
                    "id": "C68Hgjaow2jieF59LWzqTH",
                    "title": "Title 1",
                    "content": "Hello world 1",
                    "author": {
                      "nickname": "Victim One",
                      "email": "victim.one@example.com",
                      "vehicleid": "649acfac-10ea-43b3-907f-752e86eff2b6",
                      "profile_pic_url": "",
                      "created_at": "2021-09-16T01:46:32.413Z"
                    },
                    "comments": [],
                    "authorid": 1,
                    "CreatedAt": "2021-09-16T01:46:32.413Z"
                  }
                ]
              }
            }
          }
        }
      }
    },

    "/community/api/v2/coupon/new-coupon": {
      "post": {
        "operationId": "OP_COMMUNITY_COUPON_ADD_COUPON",
        "summary": "Add a new coupon to the shop database",
        "tags": [
          "Community / Coupon"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "description": "Coupon",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Coupon"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Coupon Added in database",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/community/api/v2/coupon/validate-coupon": {
      "post": {
        "operationId": "OP_COMMUNITY_COUPON_VALIDATE_COUPON",
        "summary": "Validate the provided discount coupon code",
        "tags": [
          "Community / Coupon"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "coupon_code"
                ],
                "properties": {
                  "coupon_code": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "CreatedAt",
                    "amount",
                    "coupon_code"
                  ],
                  "properties": {
                    "CreatedAt": {
                      "type": "string"
                    },
                    "amount": {
                      "type": "string"
                    },
                    "coupon_code": {
                      "type": "string"
                    }
                  }
                }
              }
            },
            "description": ""
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {}
                }
              }
            },
            "description": ""
          }
        }
      },
      "get": {
        "operationId": "OP_COMMUNITY_COUPON_GET_VALIDATE_COUPON",
        "summary": "Validate the provided discount coupon code",
        "tags": [
          "Community / Coupon"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "coupon_code",
            "schema": {
              "type": "string"
            },
            "required": true,
            "example": "TRAC075"
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "CreatedAt",
                    "amount",
                    "coupon_code"
                  ],
                  "properties": {
                    "CreatedAt": {
                      "type": "string"
                    },
                    "amount": {
                      "type": "string"
                    },
                    "coupon_code": {
                      "type": "string"
                    }
                  }
                }
              }
            },
            "description": ""
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {}
                }
              }
            },
            "description": ""
          }
        }
      },
      "parameters": []
    },

    "/workshop/api/shop/products": {
      "parameters": [],
      "get": {
        "operationId": "OP_WORKSHOP_SHOP_GET_PRODUCTS",
        "summary": "Get products for the shop",
        "tags": [
          "Workshop / Shop"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "credit",
                    "products"
                  ],
                  "properties": {
                    "credit": {
                      "type": "number"
                    },
                    "products": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "required": [
                          "id",
                          "image_url",
                          "name",
                          "price"
                        ],
                        "properties": {
                          "id": {
                            "type": "number"
                          },
                          "image_url": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "price": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "description": "OK"
          }
        }
      },
      "post": {
        "operationId": "OP_WORKSHOP_SHOP_CREATE_PRODUCT",
        "summary": "Add the specified product to the product catalog.",
        "tags": [
          "Workshop / Shop"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NewProduct"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Product"
                }
              }
            },
            "description": "OK"
          },
          "400": {
            "description": "Bad Request!",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true
                }
              }
            }
          }
        }
      }
    },
    "/workshop/api/shop/orders": {
      "post": {
        "operationId": "OP_WORKSHOP_SHOP_CREATE_ORDER",
        "summary": "Create a new order for a product in the shop.",
        "tags": [
          "Workshop / Shop"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductQuantity"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "id",
                    "message",
                    "credit"
                  ],
                  "properties": {
                    "id": {
                      "type": "integer"
                    },
                    "message": {
                      "type": "string"
                    },
                    "credit": {
                      "type": "number",
                      "format": "float"
                    }
                  }
                }
              }
            },
            "description": "OK"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "example": {
                    "message": "Insufficient Balance. Please apply coupons to get more\nbalance!"
                  }
                }
              }
            },
            "description": "Bad Request!"
          }
        }
      }
    },
    "/workshop/api/shop/orders/{order_id}": {
      "put": {
        "operationId": "OP_WORKSHOP_SHOP_UPDATE_ORDER",
        "summary": "Update the order specified by the order_id.",
        "tags": [
          "Workshop / Shop"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "order_id",
            "schema": {
              "type": "integer"
            },
            "required": true
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProductQuantity"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "orders"
                  ],
                  "properties": {
                    "orders": {
                      "$ref": "#/components/schemas/Order"
                    }
                  }
                }
              }
            },
            "description": "OK"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "example": {
                    "message": "The value of 'status' has to be 'delivered', 'return pending' or 'returned'"
                  }
                }
              }
            },
            "description": "Bad Request!"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "example": {
                    "message": "You are not allowed to access this resource!'"
                  }
                }
              }
            },
            "description": "Forbidden!"
          }
        }
      },
      "get": {
        "operationId": "OP_WORKSHOP_SHOP_GET_ORDER_ID",
        "summary": "Get the order details for order identified by order_id.",
        "tags": [
          "Workshop / Shop"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "order_id",
            "schema": {
              "type": "integer"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "orders"
                  ],
                  "properties": {
                    "orders": {
                      "$ref": "#/components/schemas/Order"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "example": {
                    "message": "You are not allowed to access this resource!'"
                  }
                }
              }
            },
            "description": "Forbidden!"
          }
        }
      }
    },
    "/workshop/api/shop/orders/all": {
      "get": {
        "operationId": "OP_WORKSHOP_SHOP_GET_ORDERS",
        "summary": "Get user's past orders",
        "tags": [
          "Workshop / Shop"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "orders"
                  ],
                  "properties": {
                    "orders": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "required": [
                          "created_on",
                          "id",
                          "product",
                          "quantity",
                          "status",
                          "user"
                        ],
                        "properties": {
                          "quantity": {
                            "type": "number"
                          },
                          "id": {
                            "type": "number"
                          },
                          "status": {
                            "type": "string"
                          },
                          "created_on": {
                            "type": "string"
                          },
                          "user": {
                            "type": "object",
                            "required": [
                              "email",
                              "number"
                            ],
                            "properties": {
                              "email": {
                                "type": "string"
                              },
                              "number": {
                                "type": "string"
                              }
                            }
                          },
                          "product": {
                            "type": "object",
                            "required": [
                              "id",
                              "image_url",
                              "name",
                              "price"
                            ],
                            "properties": {
                              "id": {
                                "type": "number"
                              },
                              "image_url": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "price": {
                                "type": "string"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "description": ""
          }
        }
      },
      "parameters": []
    },
    "/workshop/api/shop/orders/return_order/{order_id}": {
      "post": {
        "operationId": "OP_WORKSHOP_SHOP_RETURN_PURCHASE",
        "summary": "Return order specified by the order_id",
        "tags": [
          "Workshop / Shop"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "order_id",
            "schema": {
              "type": "integer"
            },
            "required": true
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message",
                    "order",
                    "qr_code_url"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    },
                    "order": {
                      "$ref": "#/components/schemas/Order"
                    },
                    "qr_code_url": {
                      "type": "string",
                      "format": "url"
                    }
                  }
                }
              }
            },
            "description": "OK"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "example": {
                    "message": "This order has already been returned!"
                  }
                }
              }
            },
            "description": "Bad Request!"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "example": {
                    "message": "You are not allowed to access this resource!'"
                  }
                }
              }
            },
            "description": "Forbidden!"
          }
        }
      }
    },
    "/workshop/api/shop/apply_coupon": {
      "post": {
        "operationId": "OP_WORKSHOP_SHOP_APPLY_COUPON",
        "summary": "Apply the coupon for the current user",
        "tags": [
          "Workshop / Shop"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "amount",
                  "coupon_code"
                ],
                "properties": {
                  "amount": {
                    "type": "number"
                  },
                  "coupon_code": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "credit",
                    "message"
                  ],
                  "properties": {
                    "credit": {
                      "type": "number"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            },
            "description": ""
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            },
            "description": ""
          }
        }
      },
      "parameters": []
    },
    "/workshop/api/shop/return_qr_code": {
      "get": {
        "operationId": "OP_WORKSHOP_SHOP_GET_QRCODE",
        "summary": "Get the return qr code image for UPS shipments.",
        "tags": [
          "Workshop / Shop"
        ],
        "security": [
          {}
        ],
        "parameters": [
          {
            "name": "Accept",
            "in": "header",
            "description": "The server doesn't like image/png in accept!",
            "required": true,
            "style": "simple",
            "schema": {
              "type": "string",
              "example": "*/*"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            },
            "description": "QR Code PNG Image"
          }
        }
      }
    },
   
    "/workshop/api/mechanic/": {
      "get": {
        "operationId": "OP_WORKSHOP_MECHANIC_GET_MECHANICS",
        "summary": "Get the available mechanics",
        "tags": [
          "Workshop / Mechanic"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "headers": {
              "Transfer-Encoding": {
                "content": {
                  "text/plain": {
                    "schema": {
                      "type": "string"
                    },
                    "example": "chunked"
                  }
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "mechanics"
                  ],
                  "properties": {
                    "mechanics": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "required": [
                          "id",
                          "mechanic_code",
                          "user"
                        ],
                        "properties": {
                          "id": {
                            "type": "number"
                          },
                          "mechanic_code": {
                            "type": "string"
                          },
                          "user": {
                            "type": "object",
                            "required": [
                              "email",
                              "number"
                            ],
                            "properties": {
                              "email": {
                                "type": "string"
                              },
                              "number": {
                                "type": "string"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "example": {
                  "mechanics": [
                    {
                      "id": 1,
                      "mechanic_code": "TRAC_JHN",
                      "user": {
                        "email": "jhon@example.com",
                        "number": ""
                      }
                    },
                    {
                      "id": 2,
                      "mechanic_code": "TRAC_JME",
                      "user": {
                        "email": "james@example.com",
                        "number": ""
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "parameters": []
    },
    "/workshop/api/merchant/contact_mechanic": {
      "post": {
        "operationId": "OP_WORKSHOP_MECHANIC_CONTACT_MECHANIC",
        "summary": "Contact a mechanic for a service request on your vehicle",
        "tags": [
          "Workshop / Mechanic"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "mechanic_api",
                  "mechanic_code",
                  "number_of_repeats",
                  "problem_details",
                  "repeat_request_if_failed",
                  "vin"
                ],
                "properties": {
                  "number_of_repeats": {
                    "type": "number"
                  },
                  "mechanic_api": {
                    "type": "string"
                  },
                  "vin": {
                    "type": "string"
                  },
                  "repeat_request_if_failed": {
                    "type": "boolean"
                  },
                  "problem_details": {
                    "type": "string"
                  },
                  "mechanic_code": {
                    "type": "string"
                  }
                }
              },
              "example": {
                "mechanic_api": "http://localhost:8000/workshop/api/mechanic/receive_report",
                "mechanic_code": "TRAC_JHN",
                "number_of_repeats": 0,
                "repeat_request_if_failed": false,
                "problem_details": "My car has engine trouble, and I need urgent help!",
                "vin": "0BZCX25UTBJ987271"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "response_from_mechanic_api",
                    "status"
                  ],
                  "properties": {
                    "response_from_mechanic_api": {
                      "type": "object",
                      "required": [
                        "id",
                        "sent",
                        "report_link"
                      ],
                      "properties": {
                        "id": {
                          "type": "integer",
                          "format": "int32"
                        },
                        "sent": {
                          "type": "boolean"
                        },
                        "report_link": {
                          "type": "string"
                        }
                      }
                    },
                    "status": {
                      "type": "integer",
                      "format": "int32"
                    }
                  }
                },
                "example": {
                  "response_from_mechanic_api": {
                    "id": 17,
                    "sent": true,
                    "report_link": "http://localhost:8888/workshop/api/mechanic/mechanic_report?report_id=17"
                  },
                  "status": 200
                }
              }
            }
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            },
            "description": "Bad Request!"
          },
          "503": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            },
            "description": "Service Unavailable"
          }
        }
      },
      "parameters": []
    },
    "/workshop/api/mechanic/receive_report": {
      "post": {
        "operationId": "OP_WORKSHOP_MECHANIC_CREATE_SERVICE_REPORT",
        "summary": "Create the service report and assign to the mechanic",
        "tags": [
          "Workshop / Mechanic"
        ],
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "description": "Service report details",
                "required": [
                  "mechanic_code",
                  "problem_details",
                  "vin"
                ],
                "properties": {
                  "mechanic_code": {
                    "type": "string"
                  },
                  "problem_details": {
                    "type": "string"
                  },
                  "vin": {
                    "type": "string"
                  },
                  "owner_id": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "id",
                    "sent",
                    "report_link"
                  ],
                  "properties": {
                    "id": {
                      "type": "integer"
                    },
                    "sent": {
                      "type": "string"
                    },
                    "report_link": {
                      "type": "string",
                      "format": "url"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request!",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true
                }
              }
            }
          }
        }
      }
    },
    "/workshop/api/mechanic/user_reports": {
      "get": {
        "summary": "Get all the service reports for the currently logged in user",
        "operationId": "OP_WORKSHOP_MECHANIC_GET_SVC_REPORTS",
        "tags": [
          "Workshop / Mechanic"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "Host",
            "in": "header",
            "description": "",
            "required": true,
            "style": "simple",
            "schema": {
              "type": "string",
              "example": "workshop:8000"
            }
          },
          {
            "name": "Content-Type",
            "in": "header",
            "description": "",
            "required": true,
            "style": "simple",
            "schema": {
              "type": "string",
              "example": "application/json"
            }
          },
          {
            "name": "Accept",
            "in": "header",
            "description": "",
            "required": true,
            "style": "simple",
            "schema": {
              "type": "string",
              "example": "*/*"
            }
          },
          {
            "name": "Accept-Encoding",
            "in": "header",
            "description": "",
            "required": true,
            "style": "simple",
            "schema": {
              "type": "string",
              "example": "gzip, deflate"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "headers": {
              "Date": {
                "content": {
                  "text/plain": {
                    "schema": {
                      "type": "string"
                    },
                    "example": "Tue, 21 Sep 2021 21:17:24 GMT"
                  }
                }
              },
              "Server": {
                "content": {
                  "text/plain": {
                    "schema": {
                      "type": "string"
                    },
                    "example": "WSGIServer/0.2 CPython/3.8.12"
                  }
                }
              },
              "Allow": {
                "content": {
                  "text/plain": {
                    "schema": {
                      "type": "string"
                    },
                    "example": "GET, HEAD, OPTIONS"
                  }
                }
              },
              "Content-Length": {
                "content": {
                  "text/plain": {
                    "schema": {
                      "type": "string"
                    },
                    "example": "3131"
                  }
                }
              },
              "Vary": {
                "content": {
                  "text/plain": {
                    "schema": {
                      "type": "string"
                    },
                    "example": "Origin, Cookie"
                  }
                }
              },
              "Access-Control-Allow-Origin": {
                "content": {
                  "text/plain": {
                    "schema": {
                      "type": "string"
                    },
                    "example": "*"
                  }
                }
              },
              "X-Frame-Options": {
                "content": {
                  "text/plain": {
                    "schema": {
                      "type": "string"
                    },
                    "example": "SAMEORIGIN"
                  }
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "title": "Service Requests",
                  "required": [
                    "service_requests"
                  ],
                  "type": "object",
                  "properties": {
                    "service_requests": {
                      "type": "array",
                      "items": {
                        "items": {
                          "title": "Service Request",
                          "required": [
                            "id",
                            "mechanic",
                            "vehicle",
                            "problem_details",
                            "status",
                            "created_on"
                          ],
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "integer",
                              "format": "int32"
                            },
                            "mechanic": {
                              "title": "Mechanic",
                              "required": [
                                "id",
                                "mechanic_code",
                                "user"
                              ],
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "integer",
                                  "format": "int32"
                                },
                                "mechanic_code": {
                                  "type": "string"
                                },
                                "user": {
                                  "title": "user",
                                  "required": [
                                    "email",
                                    "number"
                                  ],
                                  "type": "object",
                                  "properties": {
                                    "email": {
                                      "type": "string"
                                    },
                                    "number": {
                                      "type": "string"
                                    }
                                  }
                                }
                              },
                              "example": {
                                "id": 1,
                                "mechanic_code": "TRAC_JHN",
                                "user": {
                                  "email": "jhon@example.com",
                                  "number": "415-654-3212"
                                }
                              }
                            },
                            "vehicle": {
                              "title": "vehicle",
                              "required": [
                                "id",
                                "vin",
                                "owner"
                              ],
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "integer",
                                  "format": "int32"
                                },
                                "vin": {
                                  "type": "string"
                                },
                                "owner": {
                                  "title": "owner",
                                  "required": [
                                    "email",
                                    "number"
                                  ],
                                  "type": "object",
                                  "properties": {
                                    "email": {
                                      "type": "string"
                                    },
                                    "number": {
                                      "type": "string"
                                    }
                                  }
                                }
                              },
                              "example": {
                                "id": 23,
                                "vin": "0FOPP90TFEE927859",
                                "owner": {
                                  "email": "victim.one@example.com",
                                  "number": "4156895423"
                                }
                              }
                            },
                            "problem_details": {
                              "type": "string"
                            },
                            "status": {
                              "enum": [
                                "Pending",
                                "Finished"
                              ],
                              "type": "string"
                            },
                            "created_on": {
                              "type": "string"
                            }
                          }
                        }
                      },
                      "description": "The array of vehicle service requests for the user"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/workshop/api/mechanic/mechanic_report": {
      "get": {
        "summary": "Get the service report specified by the report_id query parameter",
        "operationId": "OP_WORKSHOP_MECHANIC_GET_SVC_REPORT",
        "tags": [
          "Workshop / Mechanic"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "report_id",
            "in": "query",
            "description": "",
            "required": true,
            "style": "form",
            "explode": true,
            "schema": {
              "type": "integer",
              "format": "int32",
              "example": 2
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "headers": {
              "Server": {
                "content": {
                  "text/plain": {
                    "schema": {
                      "type": "string"
                    },
                    "example": "openresty/1.17.8.2"
                  }
                }
              },
              "Date": {
                "content": {
                  "text/plain": {
                    "schema": {
                      "type": "string"
                    },
                    "example": "Tue, 21 Sep 2021 22:33:37 GMT"
                  }
                }
              },
              "Transfer-Encoding": {
                "content": {
                  "text/plain": {
                    "schema": {
                      "type": "string"
                    },
                    "example": "chunked"
                  }
                }
              },
              "Allow": {
                "content": {
                  "text/plain": {
                    "schema": {
                      "type": "string"
                    },
                    "example": "GET, HEAD, OPTIONS"
                  }
                }
              },
              "Vary": {
                "content": {
                  "text/plain": {
                    "schema": {
                      "type": "string"
                    },
                    "example": "Origin, Cookie"
                  }
                }
              },
              "X-Frame-Options": {
                "content": {
                  "text/plain": {
                    "schema": {
                      "type": "string"
                    },
                    "example": "SAMEORIGIN"
                  }
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "title": "Service Request",
                  "required": [
                    "id",
                    "mechanic",
                    "vehicle",
                    "problem_details",
                    "status",
                    "created_on"
                  ],
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "integer",
                      "format": "int32"
                    },
                    "mechanic": {
                      "title": "Mechanic",
                      "required": [
                        "id",
                        "mechanic_code",
                        "user"
                      ],
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "format": "int32"
                        },
                        "mechanic_code": {
                          "type": "string"
                        },
                        "user": {
                          "title": "user",
                          "required": [
                            "email",
                            "number"
                          ],
                          "type": "object",
                          "properties": {
                            "email": {
                              "type": "string"
                            },
                            "number": {
                              "type": "string"
                            }
                          }
                        }
                      },
                      "example": {
                        "id": 1,
                        "mechanic_code": "TRAC_JHN",
                        "user": {
                          "email": "jhon@example.com",
                          "number": "415-654-3212"
                        }
                      }
                    },
                    "vehicle": {
                      "title": "vehicle",
                      "required": [
                        "id",
                        "vin",
                        "owner"
                      ],
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "format": "int32"
                        },
                        "vin": {
                          "type": "string"
                        },
                        "owner": {
                          "title": "owner",
                          "required": [
                            "email",
                            "number"
                          ],
                          "type": "object",
                          "properties": {
                            "email": {
                              "type": "string"
                            },
                            "number": {
                              "type": "string"
                            }
                          }
                        }
                      },
                      "example": {
                        "id": 23,
                        "vin": "0FOPP90TFEE927859",
                        "owner": {
                          "email": "victim.one@example.com",
                          "number": "4156895423"
                        }
                      }
                    },
                    "problem_details": {
                      "type": "string"
                    },
                    "status": {
                      "type": "string"
                    },
                    "created_on": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/workshop/api/mechanic/service_requests": {
      "get": {
        "operationId": "OP_WORKSHOP_MECHANIC_GET_MECH_SVC_REPORTS",
        "summary": "Fetch all service requests assigned to this specific mechanic.",
        "tags": [
          "Workshop / Mechanic"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "title": "Service Requests",
                  "type": "object",
                  "required": [
                    "service_requests"
                  ],
                  "properties": {
                    "service_requests": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "required": [
                          "created_on",
                          "id",
                          "mechanic",
                          "vehicle"
                        ],
                        "properties": {
                          "id": {
                            "type": "integer",
                            "readOnly": true
                          },
                          "mechanic": {
                            "type": "object",
                            "required": [
                              "id",
                              "mechanic_code",
                              "user"
                            ],
                            "properties": {
                              "id": {
                                "type": "integer",
                                "readOnly": true
                              },
                              "mechanic_code": {
                                "type": "string"
                              },
                              "user": {
                                "type": "object",
                                "required": [
                                  "email"
                                ],
                                "properties": {
                                  "email": {
                                    "type": "string"
                                  },
                                  "number": {
                                    "type": "string",
                                    "nullable": true
                                  }
                                }
                              }
                            }
                          },
                          "vehicle": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "integer",
                                "readOnly": true
                              },
                              "vin": {
                                "type": "string"
                              },
                              "owner": {
                                "type": "object",
                                "properties": {
                                  "email": {
                                    "type": "string"
                                  },
                                  "number": {
                                    "type": "string",
                                    "nullable": true
                                  }
                                },
                                "required": [
                                  "email"
                                ]
                              }
                            },
                            "required": [
                              "id",
                              "owner",
                              "vin"
                            ]
                          },
                          "problem_details": {
                            "type": "string"
                          },
                          "status": {
                            "enum": [
                              "Pending",
                              "Finished"
                            ],
                            "type": "string"
                          },
                          "created_on": {
                            "type": "string",
                            "format": "date-time"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/workshop/api/mechanic/signup": {
      "post": {
        "operationId": "OP_WORKSHOP_MECHANIC_SIGNUP",
        "summary": "Register a new mechanic in the workshop.",
        "tags": [
          "Workshop / Mechanic"
        ],
        "security": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "number": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  },
                  "mechanic_code": {
                    "type": "string"
                  }
                },
                "required": [
                  "email",
                  "mechanic_code",
                  "name",
                  "number",
                  "password"
                ]
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "example": {
                    "message": "Mechanic created with email: john@workshop.com"
                  }
                }
              }
            }
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "message"
                  ],
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "example": {
                    "message": "Mechanic code already exists!'"
                  }
                }
              }
            },
            "description": "Bad Request!"
          }
        }
      }
    }

  },
  "components": {
    "schemas": {
      "Order": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "readOnly": true
          },
          "user": {
            "$ref": "#/components/schemas/User"
          },
          "product": {
            "$ref": "#/components/schemas/Product"
          },
          "quantity": {
            "type": "integer"
          },
          "status": {
            "$ref": "#/components/schemas/OrderStatusEnum"
          },
          "created_on": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": [
          "created_on",
          "id",
          "product",
          "user"
        ]
      },
      "User": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string"
          },
          "number": {
            "type": "string",
            "nullable": true
          }
        },
        "required": [
          "email"
        ]
      },
      "NewProduct": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "price": {
            "type": "string",
            "format": "decimal",
            "pattern": "^\\d{0,18}(\\.\\d{0,2})?$"
          },
          "image_url": {
            "type": "string",
            "format": "url"
          }
        },
        "required": [
          "image_url",
          "name",
          "price"
        ]
      },
      "Product": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "readOnly": true
          },
          "name": {
            "type": "string"
          },
          "price": {
            "type": "string",
            "format": "decimal",
            "pattern": "^\\d{0,18}(\\.\\d{0,2})?$"
          },
          "image_url": {
            "type": "string",
            "format": "url"
          }
        },
        "required": [
          "id",
          "image_url",
          "name",
          "price"
        ]
      },
      "OrderStatusEnum": {
        "enum": [
          "delivered",
          "return pending",
          "returned"
        ],
        "type": "string"
      },
      "ProductQuantity": {
        "type": "object",
        "properties": {
          "product_id": {
            "type": "integer"
          },
          "quantity": {
            "type": "integer"
          }
        },
        "required": [
          "product_id",
          "quantity"
        ]
      },
      "Post": {
        "title": "Post",
        "required": [
          "id",
          "title",
          "content",
          "author",
          "comments",
          "authorid",
          "CreatedAt"
        ],
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "content": {
            "type": "string"
          },
          "author": {
            "$ref": "#/components/schemas/Author"
          },
          "comments": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": ""
          },
          "authorid": {
            "type": "integer",
            "format": "int32"
          },
          "CreatedAt": {
            "type": "string"
          }
        },
        "example": {
          "id": "ConZLXacq3MqhbLQDrbNLf",
          "title": "Title 3",
          "content": "Hello world 3",
          "author": {
            "nickname": "Hacker",
            "email": "hacker@darkweb.com",
            "vehicleid": "abac4018-5a38-466c-ab7f-361908afeab6",
            "profile_pic_url": "",
            "created_at": "2021-09-16T01:46:32.432Z"
          },
          "comments": [],
          "authorid": 3,
          "CreatedAt": "2021-09-16T01:46:32.432Z"
        }
      },
      "Author": {
        "title": "Author",
        "required": [
          "nickname",
          "email",
          "vehicleid",
          "profile_pic_url",
          "created_at"
        ],
        "type": "object",
        "properties": {
          "nickname": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "vehicleid": {
            "type": "string"
          },
          "profile_pic_url": {
            "type": "string"
          },
          "created_at": {
            "type": "string"
          }
        },
        "example": {
          "nickname": "Hacker",
          "email": "hacker@darkweb.com",
          "vehicleid": "abac4018-5a38-466c-ab7f-361908afeab6",
          "profile_pic_url": "",
          "created_at": "2021-09-16T01:46:32.432Z"
        }
      },
      "VideoForm": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "videoName": {
            "type": "string"
          },
          "video_url": {
            "type": "string"
          },
          "conversion_params": {
            "type": "string"
          }
        }
      },
      "CRAPIResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string"
          },
          "status": {
            "type": "integer",
            "format": "int32"
          }
        }
      },
      "OtpForm": {
        "required": [
          "email",
          "otp",
          "password"
        ],
        "type": "object",
        "properties": {
          "otp": {
            "maxLength": 4,
            "minLength": 3,
            "type": "string"
          },
          "password": {
            "maxLength": 30,
            "minLength": 5,
            "type": "string"
          },
          "email": {
            "maxLength": 30,
            "minLength": 5,
            "type": "string"
          }
        }
      },
      "JwtResponse": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "LoginWithEmailToken": {
        "required": [
          "email",
          "token"
        ],
        "type": "object",
        "properties": {
          "email": {
            "maxLength": 60,
            "minLength": 3,
            "type": "string"
          },
          "token": {
            "maxLength": 60,
            "minLength": 3,
            "type": "string"
          }
        }
      },
      "Coupon": {
        "type": "object",
        "properties": {
          "amount": {
            "type": "string"
          },
          "coupon_code": {
            "type": "string"
          },
          "createdAt": {
            "type": "string"
          }
        },
        "required": [
          "amount",
          "coupon_code"
        ]
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}